<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://kit.fontawesome.com/b88fae5da2.js" crossorigin="anonymous"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href='https://fonts.googleapis.com/css?family=Varela Round'
            rel='stylesheet'>
        <title>Invigo</title>
    </head>

    <style>
        @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css");
            * {
                margin: 0;
                padding: 0;
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
            }

            html {
                font-family: 'Varela Round';
                background-color: #242424;
            }

            body {
                font-family: 'Varela Round';
                color: #EAE9FC;
                min-width: 100vw;
                width: 100%;
                min-height: 100vw;
                margin: auto;
                text-align: center;
                align-items: center;
                overflow-x: hidden;
            }
            .folder-content {
                display: flex;
                visibility: hidden;
                opacity: 0;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: #161616;
                padding: 20px;
                border: 1px solid #0d0d0d;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                z-index: 1001;
                border-radius: 25px;
                transition: opacity 0.3s linear;
            }

            .folder-content.visible {
                visibility: visible;
                opacity: 1;
            }

            .folder-content div{
                margin: 40px;
            }

            .folder-content h2{
                position: absolute;
                left: 50%;
                transform: translate(-50%, -50%);
                padding-top: 15px;
                width: 100%;
            }

            .overlay {
                visibility: hidden;
                opacity: 0;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                transition: opacity 0.3s ease-in-out;
            }

            .overlay.visible {
                visibility: visible;
                opacity: 1;
            }


            .grid-container{
                display: grid;
                grid-template-columns: auto auto auto auto auto;
                row-gap: 5vw;
                align-items: center;
                text-align: center;
                overflow-x: hidden;
                height: 100vw;
                align-content: flex-start;
            }
            .grid-item {
                position: relative;
                height: 15vw;
                width: 15vw;
                border: 1px solid #1a1a1a;
                background-color: #1a1a1a;
                margin: auto;
                border-radius: 25px;
                transition: 0.3s ease-in-out;
                cursor: pointer;
                box-sizing: border-box;
            }

            .grid-item:hover {
                cursor: pointer;
            }
            .grid-item svg{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                height: 60%;
                width: 60%;
                padding: 2.5rem;
                transition: 0.3s ease-in-out;
                z-index: 5;
            }

            .grid-item p.title {
                transition: 0.3s ease-in-out;
                color: #EAE9FC;
                font-size: auto;
                position: absolute;
                margin: 0;
                height: 20px;
                top: 50%;
                left: 50%;
                width: 256px;
                transform: translate(-50%, 8vw);
            }
            header {
                position: static;
                top: 0;
                width: 100%;
                height: 3rem;
                margin-bottom: 2vw;
                border-bottom: 1px solid #8C8C8C;
                background-color: #242424;
                z-index: 100;
            }
            footer {
                position: fixed;
                width: 100%;
                bottom: 0;
                border-top: 1px solid #8C8C8C;
                background-color: #242424;
                z-index: 100;
            }

            header p{
                font-size: 36px;
            }

            @media (max-width: 600px) {
                .grid-container{
                    grid-template-columns: auto auto auto;
                }
                .grid-item {
                    height: 25vw;
                    width: 25vw;
                    margin: 2vw;
                    border-radius: 15px;
                }

                .grid-item svg {
                    height: 70%;
                    width: 70%;
                    padding: 1rem;
                }
                .grid-item p.title {
                    transform: translate(-50%, 13vw);
                    font-size: 12px;
                }
                .folder-content{
                    flex-direction: column;
                }
            }
        </style>
    <header>
        <p>Invigo</p>
        <div id="latest_version"></div>
    </header>
    <body>
        <div class="grid-container">
            <div data-url="/inventory" class="grid-item" data-color="#8d48aa">
                <i class="fa-solid fa-boxes-stacked"></i>
                <p class="title">Inventory</p>
            </div>
            <div data-url="/sheet_qr_codes" class="grid-item"
                data-color="white">
                <p class="title">Sheet QR Codes</p>
                <i class="fa-solid fa-qrcode"></i>
            </div>
            <div data-url="/way_back_machine" class="grid-item" data-color="#37cb77">
                <p class="title">Way Back Machine</p>
                <i class="fa-solid fa-clock-rotate-left"></i>
            </div>
            <div data-url="/server_log" class="grid-item" data-color="#f1c234">
                <p class="title">Server Log</p>
                <i class="fa-solid fa-file-lines"></i>
            </div>
            <div data-url="/logs" class="grid-item" data-color="#bf382f">
                <p class="title">Logs</p>
                <i class="fa-solid fa-box-archive"></i>
            </div>
            <div data-url="http://10.0.0.10:5051/download" class="grid-item"
                data-color="#3daee9">
                <p class="title">Download</p>
                <i class="fa-solid fa-download"></i>
            </div>
            <div data-url="#source-code-folder" class="grid-item"
                data-color="#344a5d">
                <p class="title">Source Code</p>
                <i class="fa-solid fa-folder"></i>
            </div>
            <div id="source-code-folder" class="folder-content">
                <h2>Source Code</h2>
                <div
                    data-url="https://github.com/TheCodingJsoftware/Inventory-Manager"
                    class="grid-item" data-color="#344a5d">
                    <p class="title">Invigo</p>
                    <i class="fa-solid fa-code"></i>
                </div>
                <div
                    data-url="https://github.com/TheCodingJsoftware/Invigo-Server"
                    class="grid-item" data-color="#344a5d">
                    <p class="title">Server</p>
                    <i class="fa-solid fa-server"></i>
                </div>
                <div
                    data-url="https://github.com/TheCodingJsoftware/Invigo-Web"
                    class="grid-item" data-color="#344a5d">
                    <p class="title">Web</p>
                    <i class="fa-solid fa-globe"></i>
                </div>
            </div>
        </div>
        <div id="overlay" class="overlay" onclick="closeFolder()"></div>
    </body>

    <script>
    function isMobileDevice() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    function closeFolder() {
        window.location.hash = '';
    }

    function goToMainUrl() {
        window.location.href = '/';
    }
document.addEventListener('DOMContentLoaded', function() {
    const gridItems = document.querySelectorAll('.grid-item');
    gridItems.forEach(item => {
        const color = item.getAttribute('data-color');

        item.addEventListener('mouseover', function() {
            this.style.backgroundColor = '#1a1a1a';
            this.style.borderColor = color;
            this.style.boxShadow = '0 2px 4px 0' + color + '27, 0 3px 10px 0' + color + '27';
            this.querySelector('svg').style.color = color;
        });

        item.addEventListener('mouseout', function() {
            this.style.backgroundColor = '#1a1a1a';
            this.style.borderColor = '';
            this.style.boxShadow = '';
            this.querySelector('svg').style.color = '#EAE9FC';
        });

        item.addEventListener('mousedown', function() {
            this.style.backgroundColor = color;
            this.querySelector('svg').style.color = '#171717';
        });

        item.addEventListener('mouseup', function() {
            this.style.backgroundColor = color;
        });
        item.addEventListener('click', function(event) {
            const url = this.getAttribute('data-url');
            if (isMobileDevice()){
                this.style.transform = 'scale(0.95)';
            }else{
                this.style.transform = 'scale(0.99)';
            }
            this.style.boxShadow = 'none';

            this.querySelector('svg').style.color = '#171717';
            setTimeout(() => {
                window.location.href = url;
                this.style.backgroundColor = '#171717';
                this.style.borderColor = '';
                this.style.transform = 'scale(1)';
                this.querySelector('svg').style.color = '#EAE9FC';
            }, 300);
        });
        function showFolder(folderId) {
            const folderContent = document.getElementById(folderId);
            const overlay = document.getElementById('overlay');
            if (folderContent) {
                folderContent.classList.add('visible');
                overlay.classList.add('visible');
            }
        }

        function hideAllFolders() {
            const folderContents = document.querySelectorAll('.folder-content');
            const overlay = document.getElementById('overlay');
            folderContents.forEach(folder => {
                folder.classList.remove('visible');
            });
            overlay.classList.remove('visible');
        }

        function checkForHash() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                hideAllFolders();
                showFolder(hash);
            } else {
                hideAllFolders();
            }
        }

        window.addEventListener('hashchange', checkForHash, false);

        checkForHash(); // Load contents on page load if there's a hash
    });

    // const latestVersionDiv = document.getElementById("latest_version");

    // const versionUrl = "http://10.0.0.10:5051/version";
    // const messageUrl = "http://10.0.0.10:5051/update_message";

    // Promise.all([
    //     fetch(versionUrl, { timeout: 10000 }).then(response => response.text()),
    //     fetch(messageUrl, { timeout: 10000 }).then(response => response.text())
    // ])
    // .then(([version, message]) => {
    //     latestVersionDiv.innerHTML = `
    //         <p><strong>Version:</strong> ${version}</p>
    //         <p><strong>Message:</strong> ${message}</p>
    //     `;
    // })
    // .catch(error => {
    //     console.error('Error fetching data:', error);
    //     latestVersionDiv.innerHTML = `<p>Error fetching latest version information.</p>`;
    // });
});
</script>
</html>